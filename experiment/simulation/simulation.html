<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fluid Flow Simulator - Experiment</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/9.4.4/math.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Theme Switch -->
    <div class="theme-switch-wrapper">
        <label class="theme-switch" for="checkbox">
            <input type="checkbox" id="checkbox" />
            <div class="slider">
                <div class="slider-icons">
                    <i class="fas fa-sun"></i>
                    <i class="fas fa-moon"></i>
                </div>
            </div>
        </label>
    </div>

    <!-- Audio Assistance Button -->
    <button id="audio-assist" class="audio-assist-btn" title="Audio Assistance">
        <i class="fas fa-volume-up"></i>
    </button>

    <div class="container">
        <header>
            <h1>Fluid Flow Simulator</h1>
            <p class="subtitle">Study Different Types of Fluid Flow</p>
        </header>

        <div class="theory-section">
            <h2>Theory</h2>
            <p>Reynolds Number is a dimensionless quantity:</p>
            <div class="equation">Re = (ρ × V × D) / μ</div>
            <div class="parameters">
                <p>Where:</p>
                <ul>
                    <li>Re = Reynolds Number</li>
                    <li>ρ = Fluid Density (kg/m³)</li>
                    <li>V = Flow Velocity (m/s)</li>
                    <li>D = Pipe Diameter (m)</li>
                    <li>μ = Dynamic Viscosity (Pa·s or Ns/m²)</li>
                </ul>
            </div>
        </div>

        <div class="simulation-container">
            <div class="input-section">
                <h2>Input Parameters</h2>
                <div class="input-group">
                    <label for="diameter">Pipe Diameter (m):</label>
                    <input type="number" id="diameter" step="0.001" min="0.001" value="0.05">
                </div>
                <div class="input-group">
                    <label for="velocity">Flow Velocity (m/s):</label>
                    <input type="number" id="velocity" step="0.1" min="0.1" value="1.5">
                </div>
                <div class="input-group">
                    <label for="fluid-type">Fluid Type:</label>
                    <select id="fluid-type">
                        <option value="water">Water</option>
                        <option value="oil">Oil</option>
                        <option value="air">Air</option>
                        <option value="custom">Custom</option>
                    </select>
                </div>
                <div id="custom-properties" class="hidden">
                    <div class="input-group">
                        <label for="density">Density (kg/m³):</label>
                        <input type="number" id="density" step="0.1" min="0.1">
                    </div>
                    <div class="input-group">
                        <label for="viscosity">Viscosity (Pa·s):</label>
                        <input type="number" id="viscosity" step="0.0001" min="0.0001">
                    </div>
                </div>
                <div class="button-container">
                    <button id="calculate-btn">Calculate Reynolds Number</button>
                    <button id="reset-btn" class="reset-button">Reset</button>
                </div>
            </div>

            <div class="results-section">
                <h2>Results</h2>
                <div id="reynolds-number" class="result-display">
                    <span class="label">Reynolds Number:</span>
                    <span class="value">-</span>
                </div>
                <div id="flow-type" class="result-display">
                    <span class="label">Flow Type:</span>
                    <span class="value">-</span>
                </div>
                <div id="record-count">Recorded Data Points: 0</div>
                <div class="button-group">
                    <button id="record-btn" disabled>Record Data</button>
                    <button id="export-btn">Export to PDF</button>
                </div>
            </div>

            <div class="visualization-section">
                <h2>Flow Visualization</h2>
                <div id="flow-animation"></div>
                <!-- <div id="reynolds-scale"></div> -->
            </div>
        </div>
    </div>
    <script src="script.js"></script>
    <script>
        // Theme switcher
        const toggleSwitch = document.querySelector('#checkbox');
        const html = document.querySelector('html');
        
        // Check for saved theme preference
        const currentTheme = localStorage.getItem('theme');
        if (currentTheme) {
            html.setAttribute('data-theme', currentTheme);
            if (currentTheme === 'dark') {
                toggleSwitch.checked = true;
            }
        }

        // Theme switch handler
        function switchTheme(e) {
            if (e.target.checked) {
                html.setAttribute('data-theme', 'dark');
                localStorage.setItem('theme', 'dark');
            } else {
                html.setAttribute('data-theme', 'light');
                localStorage.setItem('theme', 'light');
            }
        }

        toggleSwitch.addEventListener('change', switchTheme);

        // Audio Assistance
        const audioAssistBtn = document.getElementById('audio-assist');
        const assistanceText = `Hey, We are performing experiment to determine Reynolds number and study different kind of flows. 
            To start the simulation you need to scroll a bit and select the input parameters.
            First select the Pipe Diameter in meters,
            then select flow velocity in meter per second,
            and lastly select the type of fluid you want.
            You can also choose a custom fluid for which you have to enter density and viscosity of that fluid.
            Then press calculate reynolds number.
            You can see the Reynolds number and the flow type of that fluid.
            If you scroll a bit you will also see a flow visualization graph based on Flow type of fluid`;

        let isPlaying = false;
        let currentSpeech = null;

        audioAssistBtn.addEventListener('click', () => {
            if (isPlaying) {
                // Stop the audio
                window.speechSynthesis.cancel();
                audioAssistBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
                isPlaying = false;
            } else {
                // Start new speech
                currentSpeech = new SpeechSynthesisUtterance(assistanceText);
                currentSpeech.rate = 0.9;
                currentSpeech.pitch = 1;
                currentSpeech.volume = 1;

                // Change icon to indicate playing state
                audioAssistBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
                isPlaying = true;

                // Handle speech end
                currentSpeech.onend = () => {
                    audioAssistBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
                    isPlaying = false;
                };

                // Start speaking
                window.speechSynthesis.speak(currentSpeech);
            }
        });
    </script>
</body>
</html> 